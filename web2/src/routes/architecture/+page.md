# Architecture Design

![uml](/Images/arch5.svg)

The system architecture of the Carbon Token on the Polygon Blockchain project is comprised of several interconnected components that work together to provide an efficient, secure, and user-friendly platform. The project uses modern and reliable technologies to ensure a seamless and transparent experience for its users.

The frontend of the platform is built using the SvelteKit framework, which offers several advantages over traditional frameworks, such as improved performance and faster load times. Users can purchase carbon tokens, view their token balance, and monitor their carbon offsetting progress through this responsive and intuitive interface.

The SvelteKit application is deployed on Vercel, a reliable and scalable hosting platform that specializes in deploying frontend applications with ease. Vercel offers a range of benefits, including automatic SSL, global CDN, and seamless integration with popular version control systems like Git. The SSL protocol is implemented to enhance the security and trustworthiness of the platform, protecting user data, and ensuring regulatory compliance.

Decentralized hosting alternatives such as Unstoppable Domains, Fleek IPFS, and Ethereum Name Service (ENS) are explored to ensure a fully decentralized environment and guarantee the platform's stability and scalability.

Integration with the Polygon blockchain is facilitated through web3 MetaMask connections and WalletConnect, providing a convenient and secure way for users to interact with the platform. Alchemy is also used to facilitate communication with the blockchain, ensuring that transactions are processed quickly and efficiently.

Overall, the use of modern and reliable technologies in the system architecture of the Carbon Token on the Polygon Blockchain project ensures a seamless and transparent experience for users, while also prioritizing security, stability, and scalability.

The Layered Architecture Approach is a software design pattern that organizes the components of a system into distinct layers, providing a specific set of functionalities to ensure separation of concerns, improved maintainability, and modularity in the system.

The Carbon Token Project on the Polygon Blockchain utilizes the Layered Architecture Approach, which is divided into four main layers:

1. Presentation Layer (Frontend/WebUI)
2. Application Layer (APIs/Logic)
3. Smart Contracts Layer (Blockchain)
4. Data Layer (Blockchain & Analytics)

The Presentation Layer is responsible for providing the user interface (UI) and user experience (UX) for the Carbon Token platform. The frontend is built using modern web technologies such as HTML, CSS, JavaScript, and SvelteKit framework, providing users with a responsive and intuitive interface to interact with the platform.

The Application Layer contains the business logic and APIs for the Carbon Token platform. It includes the communication between the frontend and the smart contracts on the Polygon blockchain, as well as the integration of the AI-based algorithm for carbon offsetting measurement. This layer is responsible for processing user requests, managing token transactions, and ensuring the proper functioning of the platform.

The Smart Contracts Layer comprises the smart contracts that manage the issuance and tracking of carbon tokens on the Polygon blockchain. The smart contracts handle token transactions, manage tokenomics, and ensure the security and transparency of the platform.

The Data Layer is responsible for storing and managing data related to the Carbon Token platform. It includes the Polygon blockchain, which records all token transactions, and the data analytics module, which analyzes data generated by the AI-based algorithm to determine the amount of carbon offsetting achieved by the reforestation efforts.

The Layered Architecture Approach provides several benefits, including effective separation of different functionalities and concerns, making it easier to maintain, update, and scale individual components of the system as needed. This approach also allows for better testing and quality assurance, as each layer can be tested and modified independently.

## Component Diagram

Here's the textual description of the component diagram for the Carbon Token project:

1. Frontend (WebUI)
    a. Purchase Tokens
    b. View Token Balance
    c. Monitor Carbon Offsetting Progress
2. Backend (APIs/Logic)
    a. Process User Requests
    b. Manage Token Transactions
    c. Integrate AI-based Algorithm for Carbon Offsetting Measurement
3. Smart Contracts (Polygon Blockchain)
    a. Token Issuance
    b. Token Transactions
    c. Tokenomics Management
4. Data Layer (Blockchain & Analytics)
    a. Polygon Blockchain (Token Transactions)
    b. Data Analytics Module (Carbon Offsetting Measurement)
5. External Components
    a. AI-based Algorithm (Carbon Offsetting Measurement)
    b. MetaMask and WalletConnect (Blockchain Wallet Integration)

![uml](/Images/arch1.svg)

## Data Flow Diagram

A Data Flow Diagram (DFD) provides a visual representation of how data flows through a system. It helps to understand the flow of data between different components and processes in the system. Here is a textual description of the Data Flow Diagram for the Carbon Token project:

1. User Interaction:
   The user interacts with the Frontend (WebUI) to purchase carbon tokens, view their token balance, and monitor their carbon offsetting progress.
2. Frontend (WebUI) to Backend (APIs/Logic):
   The frontend sends user requests to the backend, which processes the requests and manages token transactions.
3. Backend (APIs/Logic) to Smart Contracts (Polygon Blockchain):
   The backend communicates with the smart contracts to perform token issuance, token transactions, and tokenomics management.
4. Smart Contracts (Polygon Blockchain) to Data Layer (Blockchain & Analytics):
   The smart contracts store token transactions on the Polygon Blockchain, and the data analytics module receives data for carbon offsetting measurement.
5. Data Layer (Blockchain & Analytics) to AI-based Algorithm (Carbon Offsetting Measurement):
   The data analytics module sends data to the AI-based algorithm, which calculates the carbon offsetting achieved through reforestation efforts.
6. AI-based Algorithm (Carbon Offsetting Measurement) to Backend (APIs/Logic):
   The AI-based algorithm sends the carbon offsetting measurements back to the backend, which updates the user's carbon offsetting progress.
7. Backend (APIs/Logic) to Frontend (WebUI):
   The backend sends updated information, including the user's token balance and carbon offsetting progress, back to the frontend for display.

![uml](/Images/arch2.svg)

## 4.2. Smart Contract Design

The Carbon Token project's Smart Contract Design consists of several interconnected contracts responsible for various aspects of the system. These contracts are deployed on the Polygon blockchain, enabling the issuance and management of carbon tokens and the calculation of carbon offsetting achieved through reforestation efforts.

### CarbonToken Contract

This contract is in charge of creating, issuing, and managing carbon tokens. It encompasses functionalities such as minting and burning tokens and transferring tokens between users. The CarbonToken contract is ERC20-compatible, ensuring compatibility with existing wallets and exchanges.

**Key functions of the CarbonToken Contract:**

- Mint tokens
- Burn tokens
- Transfer tokens
- Query token balance
- Approve and transferFrom for third-party transfers

### Tokenomics Contract

This contract manages the project's tokenomics, including token distribution and utility calculation. It implements the TokenomicsStrategy interface, providing methods for calculating token distribution and utility based on different strategies (e.g., LinearTokenomicsStrategy or ExponentialTokenomicsStrategy).

**Key functions of the Tokenomics Contract:**

- Set tokenomics strategy
- Calculate token distribution
- Calculate token utility

### TokenSale Contract

This contract oversees the sale of carbon tokens, including setting the token price and minimum and maximum investment amounts. It interacts with the CarbonToken contract to mint and distribute tokens to purchasers.

**Key functions of the TokenSale Contract:**

- Set token price
- Set minimum and maximum investment amounts
- Buy tokens
- Query sale details
-

![uml](/Images/arch3.svg)

### ReforestationTracking Contract

This contract tracks reforestation efforts and the resulting carbon offsetting. It interacts with the AI-based Algorithm and the Data Analytics module to measure and analyze the carbon offsetting achieved through reforestation efforts.

**Key functions of the ReforestationTracking Contract:**

- Add reforestation data
- Update carbon offsetting measurements
- Query carbon offsetting progress

### CarbonOffsettingDashboard Contract

This contract serves as a central hub for users to access and interact with their carbon offsetting data. It offers an interface for users to view their carbon token balance, the progress of reforestation efforts, and the overall carbon offsetting achieved by the system.

**Key functions of the CarbonOffsettingDashboard Contract:**

- Query user's carbon token balance
- Query user's carbon offsetting progress
- Query overall carbon offsetting achieved by the system

By developing and deploying these smart contracts on the Polygon blockchain, the Carbon Token project establishes a solid foundation for managing and tracking carbon tokens and their impact on reforestation efforts.

![uml](/Images/arch4.svg)

### 4.2.1. Carbon Token Smart Contract

The Carbon Token Smart Contract is the project's central component, handling the creation, issuance, and management of carbon tokens. It is an ERC20-compatible token, allowing compatibility with existing wallets, exchanges, and third-party applications. The contract is implemented on the Polygon blockchain, taking advantage of its fast and low-cost transactions.

![uml](/Images/arch6.svg)

**Key functions of the Carbon Token Smart Contract:**

- constructor: Initializes the Carbon Token Smart Contract with the token name, symbol, and decimals, as well as the initial and maximum token supply.
- mint: Mints new tokens and adds them to the specified user's balance. This function can only be called by authorized addresses, such as the TokenSale contract or the project owner.
- burn: Burns tokens from the specified user's balance, effectively reducing the circulating supply of tokens. This function can be used to retire tokens that represent carbon offsets that have been achieved.
- transfer: Allows users to transfer tokens from their balance to another user's balance.
- approve: Grants approval to a third-party address to transfer a specified amount of tokens on behalf of the user.
- transferFrom: Allows a third-party address to transfer tokens from one user's balance to another user's balance, as long as the required approval has been granted.
- balanceOf: Returns the token balance of a specified user.
- allowance: Returns the remaining number of tokens that a third-party address is allowed to transfer on behalf of a user, as granted by the approve function.

By implementing these functions, the Carbon Token Smart Contract provides a comprehensive solution for managing carbon tokens within the platform. Users can purchase, transfer, and burn tokens, while the TokenSale contract and other authorized addresses can mint new tokens as needed. This design ensures a secure and transparent system for tracking carbon offsets achieved through reforestation efforts.

![uml](/Images/arch7.svg)

### 4.2.2. Reforestation Incentive Smart Contract

The Reforestation Incentive Smart Contract is responsible for distributing rewards and incentives to participants in the reforestation efforts. This contract encourages individuals and organizations to take part in reforestation activities by providing them with carbon tokens as a reward for their efforts. The contract is designed to be flexible and adaptable, allowing for different types of incentives and reward structures based on the project's needs.

**Key functions of the Reforestation Incentive Smart Contract:**

- constructor: Initializes the Reforestation Incentive Smart Contract, setting the Carbon Token Smart Contract address and the initial reward distribution parameters.
- setRewardParameters: Allows the contract owner or an authorized address to update the reward distribution parameters. This includes the reward rate, minimum and maximum rewards, and any other relevant parameters.
- claimReward: Enables participants in the reforestation efforts to claim their carbon token rewards. The function verifies the eligibility of the participant and calculates the reward based on the provided proof of work (e.g., planting trees, maintaining the reforested area) and the current reward parameters.
- distributeRewards: Distributes carbon token rewards to all eligible participants. This function can be called by the contract owner or an authorized address, and ensures that rewards are fairly distributed based on each participant's contribution to the reforestation efforts.
- addAuthorizedAddress: Allows the contract owner to add new authorized addresses that can call certain restricted functions, such as updating reward parameters or distributing rewards.
- removeAuthorizedAddress: Allows the contract owner to remove an authorized address, revoking its access to the restricted functions.
- getParticipantReward: Returns the current reward balance for a specified participant.

By implementing these functions, the Reforestation Incentive Smart Contract creates a transparent and fair system for rewarding participants in the reforestation efforts. This incentivizes individuals and organizations to contribute to carbon offsetting activities, ultimately helping the project achieve its goal of promoting reforestation and combating climate change.
